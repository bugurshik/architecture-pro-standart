### <a name="_b7urdng99y53"></a>**Название задачи: Открытие депозитов онлайн для новых клиентов** 
### <a name="_hjk0fkfyohdk"></a>**Автор: Панов Сергей**
### <a name="_uanumrh8zrui"></a>**Дата: 01.06.2025**
### <a name="_3bfxc9a45514"></a>**Функциональные требования**
Опишите здесь верхнеуровневые Use Cases. Их нужно оформить в виде таблицы с пошаговым описанием:

|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
|1|Новый клиент| Подача заявки| 1. Заходит на страницу депозитов <br> 2. Видит список доступных продуктов с актуальными ставками <br>3. Заполняет форму: указывает ФИО и телефон. Нажимает "Подать заявку".|
|2|Сотрудник кол-центра| Персональные условия| 1. Звонит клиенту <br> 2. Рассказывает об условиях, изучив заявку в системе кол-центра может предложить особые условия|
|3|Новый клиент, Сотрудник фронт-офиса| Идентификация в офисе| 1. Клиент приходит в офис <br> 2. Менеджер подтверждает личность клиента|
|4|Бэк-офис| Обработка заявки | 1. Обрабатывает заявку <br> 2. Открывает депозит в АБС |
|5|SMS-шлюз| Уведомление клиента| 1. Отправка смс уведомления при открытии депозита |
### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
Опишите здесь нефункциональные требования и архитектурно значимые требования.

|**№**|**Требование**|
| :-: | :- |
|1| Передача чувствительной информации должна осуществляться с использованием шифрования трафика |
|2| Сайт и интернет-банк должны быть доступны с мобильных устройств|
|3| Не нагружать API АБС|
|4| Скорость выполнения операций должна быть менее секунды|
|5| Должна быть возможность горизонтального масштабирования интернет-банка|
|6| Все сервисы должны работать 24/7 и быть доступны в 99.9% случаев|
|7| Интерфейс должен соответствовать корпоративной системе дизайна|
|8| Время отклика API — не более 500 мс в 95% случаев|

### <a name="_qmphm5d6rvi3"></a>**Решение**
- Т.к. База данных АБС и Интернет банка (одна на двоих) уже испытывает сложности было решено выделить цепочку обработки заявок в новые сервисы.
- Для улучшения быстродействия Сервис предложений будет использовать Кеш - Redis
- Если в команде больше специалистов на языке Java, то можно написать микросервисы на Java/Spring, либо использовать комбинированный подход и разделить на две команды C# и Java, что увелит скорость разработки и охват технологий.
- Также, если язык микросервиса будет Java, то лучше использовать дазу данных Oracle
- Можно выбрать другой более производительный и новый Gateway например Kong или Traefik, но команде понадобится больше времени.

- т.к. Кредитоные ставки будут храниться в Excel-файле, на первое время, в АБС сервисе. Затем  эти данные запрашивает Сервис предложений - чтобы улучшить надежность структурирует и сохраняет в кеш.
- Сервис предложений будет содержать информацию о ставках по базовым и специальным предложениями по вкладам/кредитам, 


### <a name="_bjrr7veeh80c"></a>**Альтернативы**

- Реализовать получение актуальных ставок по депозитам в системе АБС
- Можно расширять интерфейс уже имеющегося интернет-банка, а не сайта. 
- Сотрудник бэк-офиса в ручном режиме получает зайвку из Центра обработок зайявок (ЦОЗ), а затем вносит данные в АБС. Исключая взаимодействие ЦОЗ и АБС
- Использование API уведомлений приложения в дополнение к SMS
- Использовать Kafka для передачи обработанных заявок в АБС, что еще больше снизит нагрузку на АБС и увеличит надежность доставки сообщений

**Недостатки, ограничения, риски**

- REST простая архитектура, но не очень надежная, некоторые сообщения могут потеряться по техническим причинам, нужно очень внимальтельно проработать логику повторных запросов и обработку ошибок, если это не удалось. Добавить тесты, которые будут эмулировать разрыв соединения.
- Ocelot - старый, и надежный Gateway, но морально устарел и развивается уже не так быстро, есть риск что его разработка будет заброшена и придется переходить на другие более современные решения.
- Высокая степень ручной работы бэк-офиса снижает скорость и автоматизацию процесса, включает человеческий фактор