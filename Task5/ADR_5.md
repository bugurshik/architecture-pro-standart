### <a name="_b7urdng99y53"></a>**Название задачи: Открытие депозитов онлайн** 
### <a name="_hjk0fkfyohdk"></a>**Автор: Панов Сергей**
### <a name="_uanumrh8zrui"></a>**Дата: 01.06.2025**
### <a name="_3bfxc9a45514"></a>**Функциональные требования**

|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
|1| Клиент| Подача заявки| 1. Заходит на страницу кредитов <br> 2. Видит список доступных кредитов с актуальными условиями и предодобренные предложения по кредиту <br>3. Указавает счёт зачисления средств <br> 4. Подтверждает заявку СМС-кодом|
|2| АБС | Отправка в конвеер | 1. Раз в сутки отправляет заявки в кредитный конвеер|
|3|Сотрудник бэк-офиса| Обработка заявки| 1. Обработка заявки |
|4| АБС | Уведомление клиента| 1. Отправка клиенту смс-сообщения о новом статусе заявки|
### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**

|**№**|**Требование**|
| :-: | :- |
|1| Передача чувствительной информации должна осуществляться с использованием шифрования трафика |
|2| Сайт и интернет-банк должны быть доступны с мобильных устройств|
|3| Скорость выполнения операций должна быть менее секунды|
|4| Должна быть возможность горизонтального масштабирования интернет-банка|
|5| Все сервисы должны работать 24/7 и быть доступны в 99.9% случаев|
|6| Интерфейс должен соответствовать корпоративной системе дизайна|
|7| Не нагружать Систему кредитного скоринга предрасчетами скорингов в рабочие 
часы|
|8| Система должна обрабатывать до 1000 запросов на оформление заявки в минуту|
|9| Клиент должен получает уведомление не позднее 60 секунд |
|10| Время отклика API — не более 500 мс в 95% случаев|
|11| Время обработки кредитной заявки не должно превышать 24 часа|

### <a name="_qmphm5d6rvi3"></a>**Решение**
Приведите диаграммы контекста и контейнеров в модели C4. Опишите там основные компоненты и интеграции всех элементов решения. 

- В компании большинство backend специалистов работают на языке c#/java, поэтому новые микросервисы лучше писать на этих языках по, скорее всего, лучше знакомой им REST архитектуре. 

- В качестве баз данных в новых микросервис использется MS SQL, потому что в команде есть люди с нужной компетенцией и он лучше интегрирован с языком C# (Полная поддержка EF Core).

- Gateway в будушем раскроет потенциал с микросервисами. Так же через единый канал проще убедиться в безопасности трафика. Был выбран Ocelot, потому что в команде есть компетенции на языке c#

- т.к. при онлайн заявках на депозит не желательно использовать АБС на прямую, то было принято решение хранить заявки в Центре обработок зайявок (ЦОЗ) и реализовать интеграцию с АБС, где сотрудник проводит операции в ручном режиме. 

Также опишите, какой логикой вы руководствовались в ходе принятия решений и выбора технологий. Не забывайте, что необходимо учесть все функциональные и нефункциональные требования.
### <a name="_bjrr7veeh80c"></a>**Альтернативы**
- Можно выбрать другой более производительный и новый Gateway например Kong или Traefik, но команде понадобится больше времени.

- Если в команде больше специалистов на языке Java, то можно написать микросервисы на Java/Spring, либо использовать комбинированный подход и разделить на две команды C# и Java, что увелит скорость разработки и охват технологий.
- Также, если язык микросервиса будет Java, то лучше использовать дазу данных Oracle
- Вместо REST архитектуры использовать gRPC или Kafka, это увеличит скорость обмена информацией и надежность, но увеличит срок разработки и риски, т.к. для команды это новые технологии.
- Осуществить взаимодействие Центра обработки заявок с Кредитным скорингом или кредитным конвеером с помощью Kafka, 
- Выделить отдельный микросервис для составления предварительно одобренных кредитов
- Выделить процесс из АБС по обработке кредитных заявок в отдельный микросервис.

**Недостатки, ограничения, риски**
- REST простая архитектура, но не очень надежная, некоторые сообщения могут потеряться по техническим причинам, нужно очень внимальтельно проработать логику повторных запросов и обработку ошибок, если это не удалось. Добавить тесты, которые будут эмулировать разрыв соединения.
- Ocelot - старый, и надежный Gateway, но морально устарел и развивается уже не так быстро, есть риск что его разработка будет заброшена и придется переходить на другие более современные решения.
- Высокая степень ручной работы бэк-офиса снижает скорость и автоматизацию процесса
- Неполадки у Телеком-оператора или в СМС-шлюзе вносит риски в процесс информирования клиентов о статусе заявки, и блокирует процесс подачи заявки на кредит (которую нужно подтверждать по смс) 
- Задержка или неполадки в стороннем сервисе "Бюро кредитных историй", может значительно замедлить время обработки кредитных заявок, а для новых клиентов этот поток будет блокирован.